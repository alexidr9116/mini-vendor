"use strict";(self.webpackChunkvmaclient=self.webpackChunkvmaclient||[]).push([[807],{9807:function(e,t,a){a.r(t),a.d(t,{default:function(){return _}});var s=a(5861),l=a(9439),n=a(7757),i=a.n(n),r=a(2791),d=a(937),c=a(5678),o=a(3168),h=a(6295),x=a(9913),u=a(3909),m=a(5932),v=a(2165),f=a(2839),j=a(466),b=a(2891),g=a(5667),w=a(4296),N=a(8811),p=a(2711),y=a(158),k=a(9120),P=a(925),C=a(6140),S=a(184);function A(e){var t=e.onClose,a=e.invoiceID,s=(0,r.useState)({}),n=(0,l.Z)(s,2),i=n[0],c=n[1],h=((0,o.$)().t,(0,r.useState)(!1)),x=(0,l.Z)(h,2),u=x[0],m=x[1];return(0,r.useEffect)((function(){m(!0),(0,d.DS)(d.a1.getEbarimt,{invoice_id:a}).then((function(e){m(!1),200===e.status?c(e.data.ebarimt.data):C.ZP.error((null===e||void 0===e?void 0:e.message)||"Whoops, Can not get Ebarimt")}))}),[a]),(0,S.jsxs)("div",{className:"modal modal-open bg-black/0 sm:modal-middle modal-bottom",children:[(0,S.jsx)("div",{className:" fixed inset-0 bg-black/80",onClick:t}),(0,S.jsxs)("div",{className:"z-50 bg-white rounded-2xl py-5 px-3 w-full sm:w-2/3 md:w-1/2 m-2 ",children:[(0,S.jsx)("div",{className:"flex",children:(0,S.jsx)(p.JO,{icon:"arcticons:ebarimt",width:80,height:80,className:"text-bold"})}),(0,S.jsx)("div",{className:"flex mb-3",children:(0,S.jsx)("label",{className:"text-xs font-bold",children:"EBARLIMT.MN"})}),(0,S.jsxs)("div",{className:"flex flex-col mb-3",children:[!u&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("label",{children:["Created:",null===i||void 0===i?void 0:i.created_date]}),(0,S.jsxs)("label",{children:["Amount:",null===i||void 0===i?void 0:i.amount]}),(0,S.jsxs)("label",{children:["CTA:",null===i||void 0===i?void 0:i.city_tax_amount]}),(0,S.jsxs)("label",{children:["VTA:",null===i||void 0===i?void 0:i.vat_amount]}),(0,S.jsxs)("label",{children:["Branch:",null===i||void 0===i?void 0:i.merchant_branch_code]})]}),u&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"flex items-center",children:["Created:",(0,S.jsx)("div",{class:"h-2 bg-slate-200 rounded w-1/2 animate-pulse"})]}),(0,S.jsxs)("div",{className:"flex items-center",children:["Amount:",(0,S.jsx)("div",{class:"h-2 bg-slate-200 rounded w-1/3 animate-pulse "})]}),(0,S.jsxs)("div",{className:"flex items-center",children:["CTA:",(0,S.jsx)("div",{class:"h-2 bg-slate-200 rounded w-1/4 animate-pulse "})]}),(0,S.jsxs)("div",{className:"flex items-center",children:["VTA:",(0,S.jsx)("div",{class:"h-2 bg-slate-200 rounded w-1/4 animate-pulse"})]}),(0,S.jsxs)("div",{className:"flex items-center",children:["Branch:",(0,S.jsx)("div",{class:"h-2 bg-slate-200 rounded w-1/3 animate-pulse "})]})]})]}),(0,S.jsxs)("div",{className:"flex flex-col items-center justify-center mb-5",children:[(0,S.jsxs)("div",{className:"font-bold text-lg flex w-full items-center justify-center",children:["Lottery:",null===i||void 0===i?void 0:i.ebarimt_lottery," ",u&&(0,S.jsx)("div",{class:"h-5 bg-slate-200 rounded w-1/3 animate-pulse"})]}),(0,S.jsx)(P.Z,{value:"".concat(null===i||void 0===i?void 0:i.ebarimt_qr_data),size:150})]}),(0,S.jsx)("div",{className:"flex justify-center",children:(0,S.jsx)("button",{className:"btn btn-info px-8 btn-sm ",onClick:t,children:"Close"})})]})]})}function _(){var e=(0,o.$)().t,t=(0,k.Z)().user,a=(0,r.useState)(!1),n=(0,l.Z)(a,2),P=n[0],C=n[1],_=(0,r.useState)(""),D=(0,l.Z)(_,2),Z=D[0],M=D[1],V=(0,r.useState)(0),T=(0,l.Z)(V,2),E=T[0],I=T[1],K=(0,r.useState)({amount:0,data:[]}),R=(0,l.Z)(K,2),F=R[0],B=R[1],J=(0,r.useState)({amount:0,data:[]}),L=(0,l.Z)(J,2),O=L[0],q=L[1],H=(0,r.useState)({allVendors:0,activeVendor:0,activeVendorPercent:100,allProducts:0,available:0,activeProductPercent:100,totalTrx:0,totalMe:0,spent:0,received:0}),z=(0,l.Z)(H,2),U=z[0],$=z[1],W=(0,r.useState)({}),G=(0,l.Z)(W,2),Q=G[0],X=G[1],Y=(0,r.useState)([]),ee=(0,l.Z)(Y,2),te=ee[0],ae=ee[1];(0,r.useEffect)((function(){function a(){return(a=(0,s.Z)(i().mark((function a(){var s,l,n,r,o,h,x,u,m,v;return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,d.DS)(d.Mn.getSystemInformation,{});case 2:return s=a.sent,a.next=5,(0,d.DS)(d.Mn.getSentChart,{});case 5:return l=a.sent,a.next=8,(0,d.DS)(d.Mn.getReceiveChart,{});case 8:n=a.sent,200===s.status&&(r=s.data,o=r.allPayHistory,ae(r.allPayHistory.filter((function(e){return e.receiver===t._id}))),(h={allVendors:r.allVendors.length,activeVendor:r.allVendors.filter((function(e){return"active"===e.status})).length,allProducts:r.allProducts.length,available:r.allProducts.filter((function(e){return 1===e.status})).length,inactive:r.allProducts.filter((function(e){return 0===e.status})).length,totalTrx:o.reduce((function(e,t){return t.cost+e}),0),totalMe:o.reduce((function(e,a){return(a.receiver===t._id||a.payer===t._id?a.cost:0)+e}),0),spent:o.reduce((function(e,a){return(a.payer===t._id?a.cost:0)+e}),0),received:o.reduce((function(e,a){return(a.receiver===t._id?a.cost:0)+e}),0)}).activeProductPercent=(0,c.FK)(h.available/Math.max(1,h.allProducts)*100),h.activeVendorPercent=(0,c.FK)(h.activeVendor/Math.max(1,h.allVendors)*100),$(h),X([{key:"".concat(e("dashboard.filled")),value:h.available},{key:"".concat(e("dashboard.empty")),value:h.inactive}])),200===l.status&&(x=l.data.months,u=0,x.forEach((function(e){u+=e.total})),B({amount:u,data:x})),200===n.status&&(m=n.data.months,v=0,m.forEach((function(e){v+=e.total})),q({amount:v,data:m}));case 12:case"end":return a.stop()}}),a)})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[e]);return(0,S.jsxs)(y.Z,{title:"Dashboard",children:[(0,S.jsx)("div",{className:"container p-2 ",children:(0,S.jsxs)("div",{className:"flex flex-col sm:grid md:grid-cols-2 gap-2 items-center justify-center",children:[(0,S.jsx)("div",{className:"card bg-base-100 shadow-lg w-full  ",children:(0,S.jsxs)("div",{className:"card-body",children:[(0,S.jsx)("h2",{className:"card-title divider text-sky-400",children:e("dashboard.systemInformation")}),(0,S.jsxs)("div",{className:"flex flex-col",children:[(0,S.jsxs)("div",{className:"grid grid-cols-2",children:[(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:"text-lg font-bold",children:[e("dashboard.totalTransaction"),"-",(0,c.w2)(U.totalTrx,"\u20ae")]}),(0,S.jsxs)("div",{className:"",children:[e("dashboard.total"),"-",(0,c.w2)(U.totalMe,"\u20ae")]}),(0,S.jsxs)("div",{className:"",children:[e("dashboard.spent"),"-",(0,c.w2)(U.spent,"\u20ae")]}),(0,S.jsxs)("div",{className:"",children:[e("dashboard.received"),"-",(0,c.w2)(U.received,"\u20ae")]})]}),(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:"text-lg font-bold",children:[e("dashboard.allProducts"),"-",U.allProducts]}),(0,S.jsxs)("div",{className:" ",children:[e("dashboard.empty"),"-",U.inactive]}),(0,S.jsxs)("div",{className:" ",children:[e("dashboard.filled"),"-",U.available,"(",U.activeProductPercent,")%"]})]})]}),(0,S.jsx)("div",{className:"w-full h-[200px] relative",children:(0,S.jsx)(x.h,{width:"100%",height:"100%",children:(0,S.jsx)(u.u,{width:100,height:100,children:(0,S.jsx)(m.b,{activeIndex:E,activeShape:function(e){var t=Math.PI/180,a=e.cx,s=e.cy,l=e.midAngle,n=e.innerRadius,i=e.outerRadius,r=e.startAngle,d=e.endAngle,c=e.fill,o=e.payload,x=e.percent,u=e.value,m=Math.sin(-t*l),v=Math.cos(-t*l),f=a+i*v+22*(v>=0?1:-1),j=s+i*m,b=v>=0?"start":"end";return(0,S.jsxs)("g",{children:[(0,S.jsxs)("text",{x:a,y:s,dy:8,textAnchor:"middle",fill:c,children:[o.key,":",o.value]}),(0,S.jsx)(h.L,{cx:a,cy:s,innerRadius:n,outerRadius:i,startAngle:r,endAngle:d,fill:c}),(0,S.jsx)(h.L,{cx:a,cy:s,startAngle:r,endAngle:d,innerRadius:i+6,outerRadius:i+10,fill:c}),(0,S.jsxs)("text",{x:f-(v>=0?20:-20)+12*(v>=0?1:-1),y:j,textAnchor:b,fill:"#333",children:["Am-","".concat(u)]}),(0,S.jsx)("text",{x:f-(v>=0?20:-20)+12*(v>=0?1:-1),y:j,dy:18,textAnchor:b,fill:"#999",children:"(".concat((100*x).toFixed(2),"%)")})]})},data:Q,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#00d0ff",dataKey:"value",onMouseEnter:function(e,t){I(t)}})})})})]})]})}),(0,S.jsx)("div",{className:"card bg-base-100 shadow-lg w-full  ",children:(0,S.jsxs)("div",{className:"card-body",children:[(0,S.jsxs)("h2",{className:"card-title divider text-sky-400",children:[(0,S.jsx)("label",{children:(0,S.jsx)(p.JO,{height:20,width:20,icon:"akar-icons:arrow-up"})}),e("dashboard.sentInformation")]}),(0,S.jsx)("div",{className:"flex flex-col",children:(0,S.jsxs)("div",{className:"text-lg font-bold",children:[e("dashboard.amount"),"-",(0,c.w2)(F.amount,"\u20ae")]})}),(0,S.jsx)("div",{className:"w-full h-[260px] relative",children:(0,S.jsx)(x.h,{width:"100%",height:"100%",children:(0,S.jsxs)(v.w,{width:350,height:200,data:F.data,margin:{top:5,right:30,left:20,bottom:5},children:[(0,S.jsx)(f.q,{strokeDasharray:"3 3"}),(0,S.jsx)(j.K,{dataKey:"_id"}),(0,S.jsx)(b.B,{}),(0,S.jsx)(g.u,{}),(0,S.jsx)(w.D,{}),(0,S.jsx)(N.x,{type:"monotone",dataKey:"total",stroke:"#00d0ff",activeDot:{r:8}})]})})})]})}),(0,S.jsx)("div",{className:"card bg-base-100 shadow-lg w-full  ",children:(0,S.jsxs)("div",{className:"card-body",children:[(0,S.jsxs)("h2",{className:"card-title divider text-sky-400",children:[(0,S.jsx)("label",{children:(0,S.jsx)(p.JO,{height:20,width:20,icon:"akar-icons:arrow-down"})}),e("dashboard.receiveInformation")]}),(0,S.jsx)("div",{className:"flex flex-col",children:(0,S.jsxs)("div",{className:"text-lg font-bold",children:[e("dashboard.amount"),"-",(0,c.w2)(O.amount,"\u20ae")]})}),(0,S.jsx)("div",{className:"w-full h-[260px] relative",children:(0,S.jsx)(x.h,{width:"100%",height:"100%",children:(0,S.jsxs)(v.w,{width:350,height:200,data:O.data,margin:{top:5,right:30,left:20,bottom:5},children:[(0,S.jsx)(f.q,{strokeDasharray:"3 3"}),(0,S.jsx)(j.K,{dataKey:"_id"}),(0,S.jsx)(b.B,{}),(0,S.jsx)(g.u,{}),(0,S.jsx)(w.D,{}),(0,S.jsx)(N.x,{type:"monotone",dataKey:"total",stroke:"#00d0ff",activeDot:{r:8}})]})})})]})}),(0,S.jsx)("div",{className:"card bg-base-100 shadow-lg w-full  ",children:(0,S.jsxs)("div",{className:"card-body",children:[(0,S.jsxs)("h2",{className:"card-title divider text-sky-400",children:[(0,S.jsx)("label",{children:(0,S.jsx)(p.JO,{height:20,width:20,icon:"la:file-invoice-dollar"})}),e("dashboard.invoiceHistory")]}),(0,S.jsx)("div",{className:"flex flex-col w-full h-[295px] overflow-auto",children:(0,S.jsx)("div",{className:"min-w-[550px]",children:te.map((function(e,t){return(0,S.jsxs)("div",{className:"grid grid-cols-12 items-center border-0 border-b-[1px]",children:[(0,S.jsx)("label",{children:t+1}),(0,S.jsx)("label",{className:"col-span-4",children:e.invoice}),(0,S.jsx)("label",{className:"col-span-2 text-xs max-w-[70px] overflow-hidden text-ellipsis text-white badge ".concat(e.isPaid?"badge-info":"badge-warning"),children:(0,c.w2)(e.cost,"\u20ae")}),(0,S.jsx)("label",{className:"col-span-3 text-xs",children:(0,c.gC)(e.created)}),(0,S.jsx)("button",{className:"btn btn-xs btn-info btn-outline col-span-2",onClick:function(){M(e.realInvoice),C(!0)},children:"Ebarimt"})]},t)}))})})]})})]})}),P&&(0,S.jsx)(A,{invoiceID:Z,onClose:function(){return C(!1)}})]})}},5678:function(e,t,a){a.d(t,{FK:function(){return n},gC:function(){return r},oE:function(){return d},w2:function(){return i}});var s=a(6098),l=a.n(s);function n(e){return l()(e).format("0,0.00a").replace(".00","")}function i(e,t){return"".concat(n(e)," ").concat(t)}function r(e){try{var t=new Date(e).toUTCString();return t.substring(0,t.length-3)}catch(a){return""}}function d(e){try{var t=new Date(e).toUTCString();return t.substring(0,t.length-12)}catch(a){return""}}}}]);
//# sourceMappingURL=807.e5a25bd6.chunk.js.map