{"version":3,"file":"static/js/596.fc34055d.chunk.js","mappings":"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","sources":["page/Profile.js"],"sourcesContent":["import Image from \"../component/Image\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { Icon } from \"@iconify/react\";\r\nimport useAuth from \"../hook/useAuth\";\r\nimport { useEffect, useMemo } from \"react\";\r\nimport { API_AUTH, SEND_POST_REQUEST, SEND_POST_REQUEST_WITH_FORM_DATA,ASSETS_URL } from \"../utils/API\";\r\nimport toast from 'react-hot-toast';\r\nimport Page from '../component/Page';\r\n \r\n\r\nexport default function Profile() {\r\n    const { user ,initialize} = useAuth();\r\n \r\n    const defaultValues = useMemo(() => ({\r\n        avatar: user?.avatar,\r\n        firstName: user?.firstName,\r\n        lastName: user?.lastName,\r\n        mobile: user?.mobile,\r\n        email:user?.email,\r\n        address:user?.address\r\n\r\n    }), [user]);\r\n    const { register, reset, handleSubmit, setValue, watch, formState: { isSubmitting } } = useForm(defaultValues);\r\n    const avatar = watch(\"avatar\");\r\n    const imageChange = (event) => {\r\n        if (event.target.files && event.target.files.length > 0) {\r\n            setValue('avatar', event.target.files[0]);\r\n        }\r\n    };\r\n\r\n    const onSubmit = (data) => {\r\n        const iData = new FormData();\r\n        const {firstName,lastName,address,email,avatar} = data;\r\n        iData.append(\"firstName\", firstName);\r\n        iData.append(\"lastName\", lastName);\r\n        iData.append(\"address\", address);\r\n        iData.append(\"email\", email);\r\n        iData.append(\"avatar\", avatar);\r\n        if( typeof avatar === \"string\"){\r\n            SEND_POST_REQUEST(API_AUTH.setProfileWithoutImage,data).then(res=>{\r\n                if(res.status === 200){\r\n                    toast.success(\"Your profile was changed\");\r\n                    initialize();\r\n                }\r\n                else{\r\n                    toast.error(res.message);\r\n                }\r\n\r\n                \r\n            });\r\n        }\r\n        if(typeof avatar === \"object\"){\r\n            SEND_POST_REQUEST_WITH_FORM_DATA(API_AUTH.setProfileWithImage,iData).then(res=>{\r\n                if(res.status === 200){\r\n                    toast.success(\"Your profile was changed\");\r\n                    initialize();\r\n                }\r\n                else{\r\n                    toast.error(res.message);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if (user)\r\n            reset(defaultValues);\r\n    }, [user, defaultValues, reset]);\r\n  \r\n        return (\r\n            <Page title = {`Profile`}>\r\n                <div className=\"container px-5 py-8 text-gray-700 \">\r\n                    <p className=\" font-bold text-2xl mb-5\"> {`User Profile`}</p>\r\n                    <form onSubmit={handleSubmit(onSubmit)} className=\"grid lg:grid-cols-3 gap-5 rounded-2xl shadow-lg bg-white\">\r\n                        <div className=\"card p-6  gap-5  h-full \">\r\n                            {/* avatar */}\r\n                            <div className=\"mx-auto relative \">\r\n                                {avatar &&\r\n                                    <Image className=\"w-32 h-32 rounded-full outline-dashed outline-stone-300 outline-offset-4 outline-1\"\r\n                                        src={typeof avatar === 'string' ?`${ASSETS_URL.root}${avatar}` : URL.createObjectURL(avatar)}\r\n                                    />\r\n                                }\r\n                                <input hidden id=\"avatar\" type=\"file\" accept=\"image/*\" onChange={imageChange} />\r\n                                <label htmlFor=\"avatar\" className=\"rounded-lg border bg-gray-50 w-9 h-9 cursor-pointer flex absolute bottom-0 right-0\">\r\n                                    <Icon icon={'fa:pencil'} width={20} className=\"m-auto text-stone-500\" />\r\n                                </label>\r\n                            </div>\r\n        \r\n                            <p className=\"text-gray-500 text-center text-sm\">\r\n                                Allowed *.jpeg, *.jpg, *.png, *.gif <br />\r\n                                max size of 3.1 MB\r\n                            </p>\r\n                        </div>\r\n        \r\n                        <div className=\" md:col-span-2   p-6 gap-3\">\r\n                            <div className=\"grid md:grid-cols-2 gap-5 mb-5\">\r\n                                <div className=\"w-full\">\r\n                                    <p className=\"font-bold text-sm pl-2\"> {`First Name`}</p>\r\n                                    <input className=\"input h-10 border border-stone-300 w-full\" required\r\n                                        {...register(\"firstName\")} />\r\n                                </div>\r\n                                <div className=\"w-full\">\r\n                                    <p className=\"font-bold text-sm pl-2\"> {`Last Name`}</p>\r\n                                    <input className=\"input h-10 border border-stone-300 w-full\" required  \r\n                                        {...register(\"lastName\")} />\r\n                                </div>\r\n                                <div className=\"w-full\">\r\n                                    <p className=\"font-bold text-sm pl-2\"> {`Mobile`}</p>\r\n                                    <input className=\"input h-10 border border-stone-300 w-full \" readOnly disabled\r\n                                        {...register(\"mobile\")} />\r\n                                </div>\r\n                                <div className=\"w-full\">\r\n                                    <p className=\"font-bold text-sm pl-2\"> {`Email`}</p>\r\n                                    <input className=\"input h-10 border border-stone-300 w-full\" required\r\n                                        {...register(\"email\")} />\r\n                                </div>\r\n                                <div className=\"w-full  md:col-span-2\">\r\n                                    <p className=\"font-bold text-sm pl-2\">{`Address`}</p>\r\n                                    <input className=\"input h-10 border border-stone-300 w-full\" required\r\n                                        {...register(\"address\")} />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex \">\r\n                                <button type=\"submit\" className={`btn btn-info px-5 ml-auto ${isSubmitting && 'loading'}`}>Save</button>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </Page>\r\n            )\r\n     \r\n    \r\n}\r\n"],"names":["Profile","useAuth","user","initialize","defaultValues","useMemo","avatar","firstName","lastName","mobile","email","address","useForm","register","reset","handleSubmit","setValue","watch","isSubmitting","formState","useEffect","title","className","onSubmit","data","iData","FormData","append","SEND_POST_REQUEST","API_AUTH","then","res","status","toast","message","SEND_POST_REQUEST_WITH_FORM_DATA","src","ASSETS_URL","URL","createObjectURL","hidden","id","type","accept","onChange","event","target","files","length","htmlFor","icon","width","required","readOnly","disabled"],"sourceRoot":""}