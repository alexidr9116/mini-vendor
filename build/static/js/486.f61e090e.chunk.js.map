{"version":3,"file":"static/js/486.f61e090e.chunk.js","mappings":"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","sources":["page/admin/GoodsRegister.js","../node_modules/@mui/icons-material/ArrowBack.js"],"sourcesContent":["import { useState, useEffect, useMemo } from \"react\";\r\n\r\nimport { useForm } from \"react-hook-form\";\r\nimport { Icon } from \"@iconify/react\";\r\nimport toast from 'react-hot-toast';\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\r\n\r\nimport { QrReader } from \"react-qr-reader\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport { API_AUTH, SEND_POST_REQUEST, SEND_POST_REQUEST_WITH_FORM_DATA, ASSETS_URL, SEND_GET_REQUEST, API_CLIENT, API_WAREHOUSE, API_ADMIN, SEND_PUT_REQUEST } from \"../../utils/API\";\r\n\r\nimport Page from '../../component/Page';\r\nimport Image from \"../../component/Image\";\r\nimport { Tabs } from \"react-daisyui\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n\r\n\r\nexport default function GoodsRegister() {\r\n    const [currentStep, setCurrentStep] = useState(0);\r\n    const [checked, setChecked] = useState(false);\r\n    const [useCamera, setUseCamera] = useState(false);\r\n    const [saving, setSaving] = useState(false);\r\n    const { t } = useTranslation();\r\n    const [warehouse,setWarehouse] = useState({});\r\n    const defaultValues = {\r\n        barcode: \"\",\r\n        title: \"\",\r\n        mobile: \"\",\r\n        weight: \"\",\r\n        size: \"\",\r\n        type: \"\",\r\n        price: \"\",\r\n        comment: \"\",\r\n    };\r\n    const { register, reset, handleSubmit, setValue, watch, formState: { isSubmitting } } = useForm(defaultValues);\r\n\r\n    const barcode = (watch(\"barcode\"));\r\n\r\n    const onSubmit = (data) => {\r\n        // console.log(data);\r\n        setSaving(true);\r\n        if(warehouse && warehouse._id ){\r\n            SEND_PUT_REQUEST(API_ADMIN.editProduct, {...data, warehouseId:warehouse._id}).then(res => {\r\n                setSaving(false);\r\n                if (res.status === 200) {\r\n                    toast.success(res.message);\r\n                    reset();\r\n                    setCurrentStep(0);\r\n                   \r\n                }\r\n                else {\r\n                    toast.error(res.message);\r\n                }\r\n            }).catch(err=>{\r\n                setSaving(false);\r\n            });\r\n        }\r\n    }\r\n\r\n    const handleResult = (result, err) => {\r\n        if (!!result) {\r\n            setValue('barcode', result?.text);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        \r\n        SEND_GET_REQUEST(API_WAREHOUSE.getSelf).then(res => {\r\n            console.log(res);\r\n            if (res.status === 200) {\r\n                setWarehouse(res.data.warehouse);\r\n            }\r\n            else {\r\n                toast('Please fill your warehouse information');\r\n            }\r\n        })\r\n    }, []);\r\n\r\n\r\n    return (\r\n        <Page title={`Setting`} className=\"container px-5 py-8 text-gray-700 w-full \">\r\n\r\n            <form className=\"\" onSubmit={handleSubmit(onSubmit)}>\r\n                <div className=\"w-full justify-center flex\">\r\n                    {currentStep === 0 &&\r\n                        <div>\r\n                            <div className=\"flex gap-10\">\r\n                                <div className=\"flex flex-col items-center  gap-4\">\r\n                                    <div className=\"text-center w-full text-lg\">\r\n                                        Scan QR or Input Barcode\r\n                                    </div>\r\n                                    <div className=\"\">\r\n                                        <label className=\"label cursor-pointer\">\r\n\r\n                                            <input type=\"checkbox\" className=\"toggle toggle-accent\" onChange={() => { setUseCamera(!useCamera) }} checked={useCamera} />\r\n                                            <span className=\"label-text mx-2\">{t('home.scan_qr')} </span>\r\n                                        </label>\r\n                                    </div>\r\n                                    <div className=\"w-[280px] h-[280px] border border-stone\" >\r\n                                        {useCamera &&\r\n                                            <QrReader\r\n                                                constraints={{ facingMode: (checked ? 'user' : 'environment') }}\r\n                                                key={(checked ? 'user' : 'environment')}\r\n                                                onResult={handleResult}\r\n                                                delay={500}\r\n                                                style={{ width: \"100%\", height: \"100%\" }}\r\n                                            />\r\n                                        }\r\n                                    </div>\r\n                                    <div className=\"\">\r\n                                        <label className=\"label cursor-pointer\">\r\n\r\n                                            <input type=\"checkbox\" className=\"toggle toggle-accent\" onChange={() => { setChecked(!checked) }} checked={checked} />\r\n                                            <span className=\"label-text mx-2\">{checked ? t('home.switch_back_camera') : t('home.switch_front_camera')}</span>\r\n                                        </label>\r\n                                    </div>\r\n                                    <input type=\"text\" placeholder=\"QR code or ID\" className=\"input input-bordered input-md w-full max-w-xs\" {...register('barcode')} />\r\n\r\n\r\n\r\n                                </div>\r\n\r\n                                <div className=\"hidden lg:block mt-8\">\r\n\r\n                                    <div className=\"alert alert-warning shadow-sm rounded-md mb-4\">\r\n                                        <div>\r\n                                            <Icon icon={'clarity:warning-standard-line'} width={40}> </Icon>\r\n                                            <span>Warning: Let's Center the Barcode !</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <Image src=\"../../assets/scan-barcode.jpg\"></Image>\r\n                                </div>\r\n\r\n                            </div>\r\n                            <div className=\"flex justify-center w-full mt-4\">\r\n                                <button disabled={(!warehouse || !warehouse._id || !barcode || (barcode && barcode.length === 0))} className=\"btn btn-info w-[200px] mt-2\" onClick={() => setCurrentStep(1)} >Next</button>\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                    {\r\n                        currentStep === 1 && <div className=\"w-full flex-col max-w-xl\">\r\n                            <div className=\"text-lg\"><IconButton onClick={() => (setCurrentStep(0))}><ArrowBackIcon></ArrowBackIcon></IconButton> General Information</div>\r\n                            <div className=\"grid md:grid-cols-2 items-center justify-center  gap-4  p-4\">\r\n\r\n                                <div className=\"flex flex-col gap-2\">\r\n                                    <label>Mobile *</label>\r\n                                    <input type=\"number\" className=\"input input-bordered rounded\"  {...register('mobile')} />\r\n                                    <label>Weight (Kg) *</label>\r\n                                    <input type=\"number\" step={0.01} className=\"input input-bordered rounded\"  {...register('weight')} />\r\n                                    <label>Price (₮) *</label>\r\n                                    <input type=\"number\" step={0.01} className=\"input input-bordered rounded\"  {...register('price')} />\r\n                                </div>\r\n                                <div className=\"flex flex-col gap-2\">\r\n                                    <label>Title</label>\r\n                                    <input className=\"input input-bordered rounded\"  {...register('title')} />\r\n\r\n                                    <label>Size</label>\r\n                                    <input className=\"input input-bordered rounded\"  {...register('size')} />\r\n                                    <label>Type</label>\r\n                                    <input className=\"input input-bordered rounded\"  {...register('type')} />\r\n\r\n                                </div>\r\n                                <div className=\" w-full md:col-span-2 flex-col flex\">\r\n                                    <label>Comment</label>\r\n                                    <input  className=\"input input-bordered rounded\"  {...register('comment')} />\r\n                                </div>\r\n                                <div className=\" w-full mt-4 md:col-span-2 justify-center flex\">\r\n\r\n                                    <button className={`btn btn-info w-3/4 ${saving?'loading':''}`} type=\"submit\">Register</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </form>\r\n\r\n        </Page >\r\n    )\r\n\r\n\r\n}\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\"\n}), 'ArrowBack');\n\nexports.default = _default;"],"names":["GoodsRegister","useState","currentStep","setCurrentStep","checked","setChecked","useCamera","setUseCamera","saving","setSaving","t","useTranslation","warehouse","setWarehouse","useForm","barcode","title","mobile","weight","size","type","price","comment","register","reset","handleSubmit","setValue","watch","formState","isSubmitting","useEffect","SEND_GET_REQUEST","API_WAREHOUSE","then","res","console","log","status","data","toast","className","onSubmit","_id","SEND_PUT_REQUEST","API_ADMIN","warehouseId","message","catch","err","onChange","constraints","facingMode","onResult","result","text","delay","style","width","height","placeholder","icon","src","disabled","length","onClick","step","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d"],"sourceRoot":""}