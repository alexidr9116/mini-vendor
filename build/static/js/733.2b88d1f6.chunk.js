"use strict";(self.webpackChunkvmaclient=self.webpackChunkvmaclient||[]).push([[733],{7077:function(e,n,t){t.r(n),t.d(n,{default:function(){return b}});var i=t(9439),l=t(2791),s=(t(2711),t(5970)),a=t(6326),r=t(2161),c=t(2990),d=(t(2675),t(158)),o=t(4135),u=t(937),h=t(5678),v=(t(4278),t(9120)),x=t(6140),m=t(151),f=(t(7876),t(184));function j(e){var n=e.onClose,t=e.id,a=e.onUpdateReview,r=(0,l.useState)(!1),c=(0,i.Z)(r,2),d=c[0],o=c[1],h=(0,l.useState)(0),v=(0,i.Z)(h,2),j=v[0],p=v[1],b=(0,l.useState)(0),g=(0,i.Z)(b,2),w=g[0],N=g[1],Z=(0,l.useState)(0),y=(0,i.Z)(Z,2),S=y[0],C=y[1],k=(0,l.useState)(""),U=(0,i.Z)(k,2),E=U[0],P=U[1],I=(0,l.useState)(0),R=(0,i.Z)(I,2),M=R[0],L=R[1],T={.5:"Useless",1:"Useless+",1.5:"Poor",2:"Poor+",2.5:"Ok",3:"Ok+",3.5:"Good",4:"Good+",4.5:"Excellent",5:"Excellent+"},A=function(e){return"".concat(T[e])};return(0,l.useEffect)((function(){}),[]),(0,f.jsxs)("div",{className:"modal modal-open bg-black/0 ",children:[(0,f.jsx)("div",{className:" fixed inset-0 bg-black/80",onClick:n}),(0,f.jsxs)("div",{className:"z-50 bg-white rounded-xl p-5 px-3",children:[(0,f.jsx)("p",{className:"text-center font-bold text-xl mb-3",children:"Write Review "}),(0,f.jsx)("div",{className:"grid  w-full p-5",children:(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:"w-full ",children:[(0,f.jsx)("p",{className:"",children:"Was it delivered on time?"}),(0,f.jsxs)("div",{className:"flex items-center mb-2",children:[(0,f.jsx)(s.Z,{value:j,onChange:function(e,n){return p(n)},emptyIcon:(0,f.jsx)(m.Z,{style:{opacity:.55}}),precision:.5}),"\xa0\xa0",j>0?A(j):""]})]}),(0,f.jsxs)("div",{className:"w-full ",children:[(0,f.jsx)("p",{className:"",children:"Has the safety been delivered?"}),(0,f.jsxs)("div",{className:"flex items-center mb-2",children:[(0,f.jsx)(s.Z,{value:w,onChange:function(e,n){return N(n)},emptyIcon:(0,f.jsx)(m.Z,{style:{opacity:.55}}),precision:.5}),"\xa0\xa0",w>0?A(w):""]})]}),(0,f.jsxs)("div",{className:"w-full ",children:[(0,f.jsx)("p",{className:"",children:"Is the price right for you?"}),(0,f.jsxs)("div",{className:"flex items-center mb-2",children:[(0,f.jsx)(s.Z,{value:S,onChange:function(e,n){return C(n)},emptyIcon:(0,f.jsx)(m.Z,{style:{opacity:.55}}),precision:.5}),"\xa0\xa0",S>0?A(S):""]})]}),(0,f.jsxs)("div",{className:"w-full",children:[(0,f.jsx)("p",{className:"",children:"Do you recommend this warehouse?"}),(0,f.jsxs)("div",{className:"flex items-center mb-2",children:[(0,f.jsx)(s.Z,{value:M,onChange:function(e,n){return L(n)},emptyIcon:(0,f.jsx)(m.Z,{style:{opacity:.55}}),precision:.5}),"\xa0\xa0",M>0?A(M):""]})]}),(0,f.jsxs)("div",{className:"w-full  items-center",children:[(0,f.jsx)("p",{className:"",children:"Your Comment"}),(0,f.jsx)("textarea",{required:!0,minLength:30,onChange:function(e){return P(e.target.value)},value:E,className:"min-w-[300px] textarea textarea-bordered w-full",rows:4})]}),(0,f.jsxs)("div",{className:"w-full grid grid-cols-2 gap-2 mt-4",children:[(0,f.jsx)("button",{className:"btn btn-sm btn-info ".concat(d&&"loading"),onClick:function(){var e={timeRate:j,brokenRate:w,priceRate:S,comment:E,recommendRate:M,productId:t};o(!0),(0,u.oh)("".concat(u.$5.writeReview),e).then((function(e){o(!1),200===e.status?a(e.data.review):x.ZP.error((null===e||void 0===e?void 0:e.message)||"Internal Server Error")})).catch((function(e){o(!1),x.ZP.error("Internal Server Error")}))},children:"Save"}),(0,f.jsx)("button",{className:"btn  btn-sm btn-info  ",onClick:n,children:"Cancel"})]})]})})]})]})}var p=10;function b(){var e=(0,v.Z)().user,n=(0,l.useState)([]),t=(0,i.Z)(n,2),x=t[0],m=t[1],b=(0,l.useState)([]),g=(0,i.Z)(b,2),w=g[0],N=g[1],Z=(0,l.useState)({}),y=(0,i.Z)(Z,2),S=(y[0],y[1],(0,l.useState)("")),C=(0,i.Z)(S,2),k=C[0],U=C[1],E=(0,l.useState)(""),P=(0,i.Z)(E,2),I=P[0],R=P[1],M=(0,l.useState)(0),L=(0,i.Z)(M,2),T=L[0],A=L[1],D=(0,l.useState)([]),O=(0,i.Z)(D,2),W=O[0],_=O[1],z=(0,l.useState)([]),F=(0,i.Z)(z,2),G=F[0],H=F[1],$=(0,l.useState)(!1),q=(0,i.Z)($,2),B=q[0],K=q[1];return(0,l.useEffect)((function(){!function(){var e=I;"all"===I&&(e="");var n=w.filter((function(n){return(n.barcode.includes(k)||n.position.includes(k)||"".concat(n.mobile).includes(k))&&n.position.includes(e)}));m(n),H(n.slice(T*p,Math.min((T+1)*p,n.length)))}()}),[w,I,k]),(0,l.useEffect)((function(){(0,u.Hf)("".concat(u.$5.getProducts).concat(e.mobile)).then((function(e){if(200===e.status&&e.data&&e.data.data){var n=e.data.data,t=e.data.reviews;console.log(t),n.map((function(e){0===t.length&&(e.review=null),t&&t.map((function(n){e._id===n.productId&&(e.review=n)}))})),N(n)}}))}),[]),(0,f.jsxs)(d.Z,{title:"Product Management",className:"flex w-full flex-col gap-4",children:[(0,f.jsxs)("div",{className:"flex w-full justify-between p-2",children:[(0,f.jsxs)("select",{className:"select select-bordered ",onChange:function(e){R(e.target.value)},value:I,children:[(0,f.jsx)("option",{value:"",disabled:!0,children:"Select Location.."}),(0,f.jsx)("option",{value:"all",children:"All"}),(0,f.jsx)("option",{value:"china",children:"China"}),(0,f.jsx)("option",{value:"coming",children:"Coming"}),(0,f.jsx)("option",{value:"ub",children:"Ulaanbaatar"}),(0,f.jsx)("option",{value:"delivery",children:"Delivery"}),(0,f.jsx)("option",{value:"completed",children:"Completed"})]}),(0,f.jsx)(o.Z,{handleChangeSearch:function(e){U(e)}})]}),(0,f.jsx)("div",{className:"overflow-x-auto w-full",children:(0,f.jsxs)("table",{className:"table w-full table-compact",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{children:"Payment Status"}),(0,f.jsx)("th",{children:"Barcode"}),(0,f.jsx)("th",{children:"Price"}),(0,f.jsx)("th",{children:"Provider"}),(0,f.jsx)("th",{children:"RegTime"}),(0,f.jsx)("th",{children:"UbTime"}),(0,f.jsx)("th",{children:"FsTime"}),(0,f.jsx)("th",{children:"Rate"})]})}),(0,f.jsxs)("tbody",{children:[0===G.length&&(0,f.jsx)("tr",{children:(0,f.jsx)("td",{colSpan:8,children:(0,f.jsx)("div",{className:"text-lg text-center p-4",children:"No data display"})})}),G&&G.map((function(e,n){var t,i;return(0,f.jsxs)("tr",{children:[(0,f.jsxs)("td",{children:["unpaid"!==(null===e||void 0===e?void 0:e.payStatus)&&(0,f.jsxs)("label",{className:"badge badge-info",children:[null===e||void 0===e?void 0:e.payStatus,",",null===e||void 0===e?void 0:e.payLocation]}),"unpaid"===(null===e||void 0===e?void 0:e.payStatus)&&(0,f.jsx)("button",{className:"btn btn-info rounded-full btn-sm",children:"Pay with QPay"})]}),(0,f.jsx)("td",{children:null===e||void 0===e?void 0:e.barcode}),(0,f.jsx)("td",{children:(0,h.w2)(null===e||void 0===e?void 0:e.price,"\u20ae")}),(0,f.jsx)("td",{children:null===e||void 0===e||null===(t=e.warehouse)||void 0===t?void 0:t.name}),(0,f.jsx)("td",{children:(0,h.oE)(null===e||void 0===e?void 0:e.registeredAt)}),(0,f.jsx)("td",{children:null!==e&&void 0!==e&&e.arrivedUbAt?(0,h.oE)(null===e||void 0===e?void 0:e.arrivedUbAt):""}),(0,f.jsx)("td",{children:null!==e&&void 0!==e&&e.arrivedUser?(0,h.oE)(null===e||void 0===e?void 0:e.arrivedUser):""}),(0,f.jsxs)("td",{children:[e.review&&(0,f.jsxs)("div",{className:"flex items-center",children:[" ",e.review.rate," ",(0,f.jsx)(s.Z,{readOnly:!0,value:null===e||void 0===e||null===(i=e.review)||void 0===i?void 0:i.rate})]}),!e.review&&(0,f.jsx)("button",{onClick:function(){return n=null===e||void 0===e?void 0:e._id,_(n),void K(!0);var n},className:" btn btn-info btn-sm rounded-full",children:"Write"})]})]},n)}))]})]})}),(0,f.jsxs)("div",{className:"flex justify-between w-full items-center mb-4 p-1  rounded-b-lg bg-stone-200 -mt-3",children:[(0,f.jsx)("div",{className:"flex items-center gap-2"}),(0,f.jsxs)("div",{className:"flex items-center  ",children:[(0,f.jsxs)("label",{children:[T+1," of ",Math.ceil(x.length/p)]}),(0,f.jsx)(a.Z,{onClick:function(){var e=T;e>=1&&(e--,H(x.slice(e*p,Math.min((e+1)*p,x.length))),A(e))},disabled:0===T,children:(0,f.jsx)(r.Z,{})}),(0,f.jsx)(a.Z,{onClick:function(){var e=T;e<Math.ceil(x.length/p)-1&&(e++,H(x.slice(e*p,Math.min((e+1)*p,x.length))),A(e))},disabled:T===Math.ceil(x.length/p)-1,children:(0,f.jsx)(c.Z,{})})]})]}),B&&(0,f.jsx)(j,{onUpdateReview:function(e){H((function(n){return n.map((function(n,t){return n._id===e.productId&&(n.review=e),n}))})),K(!1)},onClose:function(){return K(!1)},id:W})]})}},5678:function(e,n,t){t.d(n,{FK:function(){return s},gC:function(){return r},oE:function(){return c},w2:function(){return a}});var i=t(6098),l=t.n(i);function s(e){return l()(e).format("0,0.00a").replace(".00","")}function a(e,n){return"".concat(s(e)," ").concat(n)}function r(e){try{var n=new Date(e).toUTCString();return n.substring(0,n.length-3)}catch(t){return""}}function c(e){try{var n=new Date(e).toUTCString();return n.substring(0,n.length-12)}catch(t){return""}}},151:function(e,n,t){var i=t(5318);n.Z=void 0;var l=i(t(5649)),s=t(184),a=(0,l.default)((0,s.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star");n.Z=a}}]);
//# sourceMappingURL=733.2b88d1f6.chunk.js.map